"use strict";chrome.runtime.onMessage.addListener(((e,t,n)=>{if("PF_CHANNEL"===e.action)return void n({isLoaded:!0});if("PF_SCRAPE"!==e.action)return;let o;const i=document.querySelector('header [class*="LocaleSwitcher"] .active');if(!i)throw new Error("Cannot determine site locale");{const e=i.innerText.toLowerCase();switch(e){case"укр":o="uk-UA";break;case"рос":o="ru-RU";break;default:throw new Error(`Cannot determine site locale from <${e}>`)}}const r=new Map([["uk-UA",new Map([["currently",/теперішній\sчас/],["removal","переїзду"],["experiences","Стаж"],["skills","навички"],["education","Освіта"],["about_me","Про мене"],["work_permit","Дозвіл на роботу"],["additional_education","Додаткова освіта"],["not_indicated","Не вказано"],["show_contacts","Показати контакти"]])],["ru-RU",new Map([["currently",/настоящее\sвремя/],["removal","переезду"],["experiences","Стаж"],["skills","навыки"],["education","Образование"],["about_me","Обо мне"],["work_permit","Разрешение на работу"],["additional_education","Дополнительное образование"],["not_indicated","Не указано"],["show_contacts","Показать контакты"]])]]),l=()=>{const e=(e=>{const t=document.cookie.match(new RegExp(`^${e}=(.*?);`))||document.cookie.match(new RegExp(` ${e}=(.*?);`));return t&&t[1]})("__access_token");if(!e)return Promise.resolve([void 0,void 0]);const t=/(?<=resume\/)\d*/.exec(window.location.href)[0];return fetch(`${window.location.protocol}//api.${window.location.hostname}/api/resume/${t}/export/pdf`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/pdf"}}).then((e=>e.blob().then((e=>new Promise((t=>{const n=new FileReader;n.onload=()=>{const e=n.result;t([e,`${Date.now()}.pdf`])},n.readAsDataURL(e)}))))))},a=document.querySelector("main").querySelector("h1");try{let e;const t="UAH",i="//p[contains(text(),'грн')]",s=document.evaluate(i,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;let c,u;s&&(e=parseInt(s.innerText.replace(/[^\d]/g,""),10));const d=`//p[contains(text(),'${r.get(o).get("removal")}')]`,m=document.evaluate(d,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;m&&(u=m.innerText.split(" •"),u&&u.length>1&&(c=u[1].trim()));const h=[];let p,f;const x=m.parentNode.parentNode,_=x.querySelector('a[href^="tel"]');if(_){h.push(_.innerText),f=x.querySelector('a[href^="mailto"]');const e=_.closest("div");p=s?e.previousSibling.previousSibling:e.previousSibling}let g;const T=document.querySelector('[class*="KeySkillsSection_content"]');T&&(g=T.innerText.split(", "));let w=[];const y=`//h2[contains(text(),'${r.get(o).get("experiences")}')]`,v=document.evaluate(y,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(v){const e=Array.from(v.parentNode.children).filter((e=>e.matches("div")));w=e.map((e=>{const t=e.lastChild.lastChild.firstChild;let n="";t&&(n=t.innerText);const i=e.lastChild.firstChild.firstChild;let l="";i&&(l=i.innerText);const[a,s]=l.split(". "),c=e.firstChild.firstChild,u=(e=>{const{format:t}=new Intl.DateTimeFormat(e,{month:"long"});return[...Array(12).keys()].map((e=>t(new Date(Date.UTC((new Date).getFullYear(),e)))))})(o),[d,m]=c.innerText.split(/\s—\s/u),[h,p]=d.split(/\s/),f=`${p}-${`00${u.findIndex((e=>0===e.localeCompare(h,"ru-RU",{sensitivity:"accent"})))+1}`.slice(-2)}-01`;let x;if(!r.get(o).get("currently").test(m)){const[e,t]=m.split(/\s/);x=`${t}-${`00${u.findIndex((t=>0===t.localeCompare(e,"ru-RU",{sensitivity:"accent"})))+1}`.slice(-2)}-01`}const _=e.lastChild.lastChild.lastChild,g=_&&_.innerText;return{title:n||r.get(o).get("not_indicated"),company:a||r.get(o).get("not_indicated"),location:s,startsOn:f,endsOn:x,description:g}}))}const C=[],S=document.evaluate(`//h2[contains(text(),'${r.get(o).get("about_me")}')]`,document).iterateNext();S&&C.push(S.nextSibling.innerText);const $=document.evaluate(`//h2[contains(text(),'${r.get(o).get("work_permit")}')]`,document).iterateNext();if($){const e=$.parentNode.querySelectorAll("div");let t="";e.forEach((e=>{t+=`${e.innerText}<br>`})),C.push(t)}let R=[];const k=document.evaluate(`//h2[contains(text(),'${r.get(o).get("education")}')]`,document).iterateNext(),E=k&&k.nextSibling,N=document.evaluate(`//h2[contains(text(),'${r.get(o).get("additional_education")}')]`,document).iterateNext(),b=N&&N.parentNode;if(E){const e=E.childNodes;R=Array.from(e).map((e=>{const t=e.lastChild,n=t.firstChild.innerText,o=t.lastChild.innerText;if(!n||!o)return null;const i=t.querySelector("h3 + div"),r=i&&i.innerText,l=e.firstChild.innerText;return{school:n,name:o,subject:r,fromYear:l,toYear:l}})).filter((e=>e))}if(b){const e=b.querySelectorAll("& > div");R=R.concat(Array.from(e).map((e=>{const t=e.lastChild,n=t.firstChild.innerText,o=t.querySelector("p:nth-child(3)"),i=o&&o.innerText;if(!n||!i)return null;const r=t.querySelector("p"),l=r&&r.innerText,a=e.firstChild.innerText;return{school:n,name:i,subject:l,fromYear:a,toYear:a}})).filter((e=>e)))}const D={full_name:p&&p.innerText,email:f&&f.innerText,gender:null,phone_numbers:h,skype:null,photo_url:null,position:a?a.innerText:null,location:c||null,urls:[document.location.href],salary:e,salary_currency:t,skills:g,resume_text:C,resume_data:void 0,resume_filename:void 0};return l().then((([e,t])=>{D.resume_data=e,D.resume_filename=`${p&&p.innerText||Date.now()}.pdf`,n([D,w,R])})).catch((e=>{n({message:e.message,stack:e.stack})})),!0}catch(e){n({message:e.message,stack:e.stack})}}));
//# sourceMappingURL=Z3JjLnVhLXNjcmFwZXI=.js.map