"use strict";chrome.runtime.onMessage.addListener(((e,t,r)=>{if("PF_CHANNEL"===e.action)return void r({isLoaded:!0});if("PF_SCRAPE"!==e.action)return;const n=(e,t,r,n)=>{let o;const i=setInterval((()=>{e()&&(clearInterval(i),clearTimeout(o))}),r);o=setTimeout((()=>{clearInterval(i),t()}),n)},o=e=>{const t=(new Date).getFullYear(),r=1970,n=parseInt(e,10);if(!Number.isNaN(n)&&n>=r&&n<=t)return`${n}-01-01`;const o=[...Array(12).keys()].flatMap((e=>[...Array(t-r+1).keys()].map((t=>[e,t])))).find((([t,n])=>{const{format:o}=new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"});return 0===o(new Date(n+r,t,1)).localeCompare(e,"en-US")}));if(!o)return;const[i,c]=o,a=`00${i+1}`.slice(-2);return`${c+r}-${a}-01`},i=[];return new Promise(((e,t)=>{try{const r=window.location.href;if(r&&r.includes("/profile"))e();else{const r=document.evaluate("//*[contains(@class, 'tab-bar')]//a[contains(., 'About')]",document).iterateNext();r?(r.click(),n((()=>!!document.querySelector("profile-layout .profile-page")&&(e(!0),!0)),(()=>{t(new Error("Redirect to the About page did not occur"))}),100,2e3)):t(new Error("About link node not found"))}}catch(e){t(e)}})).then((e=>{const t=document.querySelector("profile-sidebar"),r=t.querySelector(".sidebar-inner > button.btn-ghost");t.classList.contains("sidebar-collapsed")&&r&&r.click();const c=t.querySelector("h1"),a=t.querySelector(".avatar-wrapper > img.avatar"),s=document.evaluate("//profile-sidebar//i[contains(., 'work_outline')]",document).iterateNext(),l=t.querySelector(".headline"),u=s?s.nextSibling:l,m=document.evaluate("//profile-sidebar//i[contains(., 'location_on')]",document).iterateNext(),d=m&&m.nextSibling,p=document.evaluate("//profile-sidebar//i[contains(., 'language')]",document).iterateNext(),y=p&&p.nextSibling,f=document.querySelectorAll('resume-page ul.social-icons-row li.social-icon-wrapper a:not([href="#"])');let S;f&&(S=Array.from(f).map((e=>e.href)));const x=document.querySelector(".resume-section.skills .resume-section-content badge-list ul");let b;x&&(b=Array.from(x.querySelectorAll(":scope li .profile-badge span")).map((e=>e.innerText)));const h=[],q=document.querySelector(".resume-section.user-resume-summary .user-resume-summary-content");q&&h.push(q.innerText.replace(/(\r\n|\n|\r)/g,"<br>"));const w=document.querySelector(".resume-section.software .resume-section-content badge-list ul");w&&Array.from(w.querySelectorAll(":scope li .profile-badge span")).forEach((e=>h.push(e.innerText)));let g=[];const k=document.querySelector(".resume-section.experience-section");k&&(g=Array.from(k.querySelectorAll(":scope user-work-experience-item")).map((e=>{const t=e.querySelector(".experience-item-title"),r=e.querySelector(".experience-item-location"),n=e.querySelector(".experience-item-duration"),[i,c]=n.innerText.split(/\s-\s/);let a=o(i),s=o(c);new Date(a)>new Date(s)&&([a,s]=[s,a]);const l=e.querySelector(".experience-item-decription")||e.querySelector(".experience-item-description");return{title:t&&t.innerText,company:"â€”",location:r&&r.innerText,startsOn:a,endsOn:s,description:l&&l.innerText}})));const A=document.querySelector(".user-resume-summary-download a");let T,v;return A&&(T=A.href,v=T.split("/").pop().split("?").shift()),i.push({full_name:c&&c.innerText,photo_url:a&&a.src,position:u&&u.textContent,location:d&&d.innerText,source_url:y&&y.href,urls:S,skills:b,resume_url:T,resume_filename:v,resume_text:h.join("<br>"),email:void 0},g,[]),(e=>new Promise((t=>{const r=document.querySelector(".resume-page .email-wrapper button");r&&r.click(),n((()=>{const r=document.querySelector(".email-wrapper > span");if(r&&r.innerText.includes("@email.com"))return!1;const n=r&&r.innerText;return t({email:n,needBackRedirect:e}),!0}),(()=>{t(void 0)}),100,4e3)})))(e)})).then((({email:e,needBackRedirect:t})=>{i[0].email=e,r(i),t&&window.history.back()})).catch((e=>{r({message:e.message,stack:e.stack})})),!0}));
//# sourceMappingURL=YXJ0c3RhdGlvbi5jb20tc2NyYXBlcg==.js.map